<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Winning Number Generator</title>
  <style>
    body {
      background-color: #111;
      color: #f0f0f0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      padding: 20px;
    }

    .page {
      display: none;
      padding: 40px;
    }

    .active {
      display: block;
    }

    h1, h2, h3 {
      color: #00ff00; /* green */
    }

    input[type="number"], input[type="text"] {
      padding: 10px;
      margin: 5px;
      border: 2px solid gold;
      border-radius: 8px;
      background-color: black;
      color: #00ff00;
      font-size: 16px;
      width: 80px;
      text-align: center;
    }

    button {
      padding: 10px 20px;
      margin: 10px;
      background-color: #00ff00;
      color: black;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: gold;
      color: black;
    }

    .grid {
      display: grid;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    #results {
      margin-top: 20px;
      padding: 20px;
      border: 2px solid gold;
      border-radius: 10px;
      display: inline-block;
      text-align: left;
      background-color: rgba(0, 0, 0, 0.8);
    }

    pre {
      font-family: monospace;   /* ensures column alignment */
      font-size: 22px;          /* larger numbers */
      color: #00ff00;           /* green */
      line-height: 1.6;
    }
    .sequence {
      margin: 10px 0;
      color: #00ff00;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <!-- Page 1 -->
  <div id="page1" class="page active">
    <h1>Define Sequence Parameters</h1>
    <p>List the Minimum Number, the Maximum Number, and the Quantity of Numbers in the Sequence:</p>
    <input type="number" id="min" placeholder="Minimum" />
    <input type="number" id="max" placeholder="Maximum" />
    <input type="number" id="spaces" placeholder="Quantity" />
    <br>
    <button type="button" onclick="goToPage2()">Submit</button>
  </div>

  <!-- Page 2 -->
  <div id="page2" class="page">
    <h3>How Many Sequences Would You Like to Generate?</h3>
    <p>(Required)</p>
    <input type="number" id="imax" placeholder="Results" />
    <h3>Enter Up To Seven Most Recent Winning Numbers</h2>
    <p>(Optional)</p>
    <form id="numbersForm"></form>
    <button type="button" onclick="goToPage3()">Submit</button>
  </div>

  <!-- Page 3 -->
  <div id="page3" class="page">
    <h2>Generated Sequences</h2>
    <div id="results" class="results"></div>
    <button onclick="goToPage1()">Back to Start</button>
  </div>

  <script>
    let min, max, spaces, imax;

    function goToPage1() {
    showPage(1);
    }

    function goToPage2() {
      min = parseInt(document.getElementById("min").value);
      max = parseInt(document.getElementById("max").value);
      spaces = parseInt(document.getElementById("spaces").value);

      if (isNaN(min) || isNaN(max) || isNaN(spaces) || min >= max || spaces <= 0) {
        alert("Please enter valid values.");
        return;
      }

      // Build input grid: 7 rows Ã— spaces columns
      const form = document.getElementById("numbersForm");
      form.innerHTML = "";
      for (let r = 0; r < 7; r++) {
        const row = document.createElement("div");
        row.className = "grid";
        row.style.gridTemplateColumns = `repeat(${spaces}, auto)`;
        for (let c = 0; c < spaces; c++) {
          const input = document.createElement("input");
          input.type = "number";
          input.min = min;
          input.max = max;
          row.appendChild(input);
        }
        form.appendChild(row);
      }
      showPage(2);
    }

    function goToPage3() {
      imax = parseInt(document.getElementById("imax").value);

      if (isNaN(imax) || imax <= 0) {
        alert("Please enter a valid number of sequences.");
        return;
      }

      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";

      // Collect frequencies from Page 2 inputs
      let freq = {};
      document.querySelectorAll("#numbersForm input").forEach(input => {
        const val = parseInt(input.value);
        if (!isNaN(val) && val >= min && val <= max) {
          freq[val] = (freq[val] || 0) + 1;
        }
      });

      // calculate "step" value
      let step = Math.round((max - (min - 1)) / (spaces + 1));

      // Build weighted pool
      let weightedNumbers = [];
      for (let n = min; n <= max; n++) {
        let f = freq[n] || 0;
        let penalty = (1 / (1 + f) ** 2); // less likely if more frequent
        let bonus = (n % step === 0) ? 1.5 : 1; // boost if multiple of step
        let specialNumbers = [3, 5, 7, 10, 13, 15, 17, 20, 23, 25, 27, 30, 33, 35, 37, 40, 42, 43, 45, 47, 50, 53, 55, 57, 60, 63, 65, 67, 70, 73, 75, 77, 80, 83, 85, 87, 90, 93, 95, 97];
        let unrandom = specialNumbers.includes(n) ? 1.5 : 1; // boost specific numbers
        let weight = penalty * bonus * unrandom;
        weightedNumbers.push({ num: n, weight: weight });
      }

      // Helper: weighted random choice
      function weightedChoice(excluded = []) {
        let pool = weightedNumbers.filter(item => !excluded.includes(item.num));
        let total = pool.reduce((sum, item) => sum + item.weight, 0);
        let r = Math.random() * total;
        for (let item of pool) {
          if (r < item.weight) return item.num;
          r -= item.weight;
        }
      }

    // Generate sequences
    let sequences = [];
    for (let i = 0; i < imax; i++) {
      let sequence = [];
      while (sequence.length < spaces) {
        let next = weightedChoice(sequence);
        if (!sequence.includes(next)) {
          sequence.push(next);
        }
      }
      sequence.sort((a, b) => a - b); // sort ascending
      sequences.push(sequence);
    }

    // Display neatly in columns
    const pre = document.createElement("pre");
    pre.textContent = sequences
      .map(seq => seq.map(n => String(n).padStart(2, " ")).join(" "))
      .join("\n");
    resultsDiv.appendChild(pre);

    showPage(3);
  }

    function showPage(n) {
      document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
      document.getElementById("page" + n).classList.add("active");
    }
  </script>
</body>
</html>
